  :root{
    --bg:#0f1117;
    --panel:#151a22;
    --text:#e6ebf3;
    --muted:#9aa6b2;
    --btn:#1f2632;
    --btn-acc:#2a3446;
    --btn-eq:#2e6ee6;
    --btn-eq-pressed:#265dcc;
    --border:#1e2531;
    --radius:16px;
    --shadow:0 10px 30px rgba(0,0,0,.35);
  }

  *{box-sizing:border-box}

  body{
    margin:0; 
    font:16px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    background:radial-gradient(1200px 800px at 70% -10%, #dc9ed8, #8ba0dc);
    color:var(--text); min-height:100vh; padding:24px;
  }

  body::before{
    content:""; 
    position:fixed; 
    inset:0; 
    background:url("images/background.jpg") center/cover no-repeat; 
    filter:blur(2px) brightness(1.0); 
    z-index:-1}

  .wrap{margin:0 auto;
    display:grid;
    gap:18px;
    align-items:stretch;
    grid-template-columns:min(420px,92vw) 340px; 
    max-width:800px}

  @media (max-width:820px){
    .wrap{
        grid-template-columns:1fr; 
        max-width:620px}
    }

  .calc{background:var(--panel);
    border:1px solid var(--border);
    border-radius:24px;
    box-shadow:var(--shadow);
    overflow:hidden}

    .calc, .side {
    display: flex;
    flex-direction: column;
    height: 100%;
    }

    .side {
    overflow: hidden;           
    position: relative;
    padding: 14px;
    display: flex;
    flex-direction: column;
    }

    .list {
    flex: 1;
    overflow-y: auto;           
    scrollbar-width: thin;      /* Firefox */
    scrollbar-color: #9297a0 #151a22;  
    padding-right: 4px;
    }

    .list::-webkit-scrollbar {
    width: 6px;
    }

    .list::-webkit-scrollbar-thumb {
    background-color: #2e6ee6;
    border-radius: 8px;
    }

    .list::-webkit-scrollbar-track {
    background-color: #151a22;
    }

  .topbar{
    display:flex; 
    align-items:center; 
    justify-content:space-between; 
    padding:10px 14px; 
    border-bottom:1px solid var(--border); 
    color:var(--muted)}

  .brand{
    display:flex; 
    align-items:center; 
    gap:10px}

  .brand .dot{
    width:10px;
    height:10px;
    border-radius:50%;
    background:#2e6ee6}

  .screen{
    padding:18px 18px 10px;
    min-height:120px;
    display:flex;
    flex-direction:column;
    gap:6px;
    position:relative}

  .history{
    min-height:20px; 
    text-align:right; 
    color:var(--muted); 
    font-size:14px; 
    word-break:break-all}

  .display{
    font-size:40px; 
    text-align:right; 
    font-weight:600; 
    word-break:break-all}

  .mem-flag{
    position:absolute; 
    left:18px; top:18px; 
    color:var(--muted); 
    font-weight:600; 
    opacity:.9; 
    display:none}

  .keys{display:grid; gap:10px; padding:14px; grid-template-columns:repeat(4,1fr)}
  .memrow{grid-column:1 / -1; display:grid; grid-template-columns:repeat(5,1fr); gap:10px; margin-bottom:2px}

  button{
    appearance:none; 
    border:1px solid var(--border); 
    background:var(--btn); 
    color:var(--text);
    border-radius:14px; 
    padding:14px; 
    font-size:18px; 
    cursor:pointer; 
    transition:transform .02s ease, filter .15s ease, background .15s ease;
    box-shadow: inset 0 -2px 0 rgba(255,255,255,.02);
  }

  button:active{
    transform:translateY(1px)}

  button.small{
    font-size:14px; 
    padding:10px 8px}

  button[disabled]{
    opacity:.5; 
    filter:grayscale(25%); 
    cursor:not-allowed}

  .op{
    background:var(--btn-acc)}

  .danger{
    color:#ffb4a6}
  .eq{
    background:var(--btn-eq); 
    border-color:#2658c0}

  .eq:active{
    background:var(--btn-eq-pressed)}

  .wide{
    grid-column:span 2}

  .sr-only{
    position:absolute; 
    width:1px; 
    height:1px; 
    padding:0; 
    margin:-1px; 
    overflow:hidden; 
    clip:rect(0,0,0,0); 
    white-space:nowrap; 
    border:0}
  @media (max-width:380px){
    .display{
        font-size:34px}

    button{
        padding:12px; 
        font-size:17px} 

    button.small{
        font-size:13px; 
        padding:9px 6px}}

  /* ===== Right panel: tabs + content ===== */
  .side{
    background:rgba(21,26,34,.55); 
    border:1px solid var(--border); 
    border-radius:20px; 
    box-shadow:var(--shadow); 
    padding:14px}

  .tabs{display:flex; 
    gap:18px; 
    padding:6px 2px 10px; 
    border-bottom:1px solid var(--border); 
    margin-bottom:8px}

  .tab{font-weight:600; 
    color:var(--muted); 
    position:relative; 
    cursor:pointer}

  .tab.active{
    color:#e6ebf3}

  .tab.active::after{content:""; 
    position:absolute; 
    left:0; 
    right:0; 
    bottom:-11px; 
    height:3px; 
    background:#2e6ee6; 
    border-radius:3px}

  .side .big{
    font-size:46px; 
    font-weight:700; 
    text-align:right; 
    margin:10px 6px 6px}

  .pane{
    display:none}

  .pane.active{
    display:block}

  .list{
    display:flex; 
    flex-direction:column; 
    gap:8px; 
    padding:8px 2px 12px; 
    max-height:340px; 
    overflow:auto}

  .empty{
    color:var(--muted); 
    padding:6px}

  .row{display:flex; 
    align-items:center; 
    justify-content:space-between; 
    gap:10px; 
    padding:10px 12px; 
    border:1px solid var(--border); 
    background:#11161e; 
    border-radius:12px}

  .row .left{
    display:flex; 
    flex-direction:column}

  .expr{
    color:var(--muted); 
    font-size:13px}

  .res{
    font-weight:700}

  .actions{
    display:flex; 
    gap:6px}

  .chip{
    border:1px solid var(--border); 
    background:#1a2130; 
    color:#cfd6e2; 
    border-radius:10px; 
    padding:4px 8px; 
    font-size:12px; 
    cursor:pointer}

  .chip:hover{
    filter:brightness(1.1)}

  .chip.danger{
    color:#ffb4a6}

  .toolbar{
    display:flex; 
    justify-content:flex-end; 
    margin-top:6px}

  .ghost{opacity:.7}

  /* Popup */
  .popup{
    position:fixed; 
    top:18px; 
    left:50%; 
    transform:translateX(-50%); 
    background:rgba(255,69,58,.9); 
    color:#fff; 
    padding:10px 18px; 
    border-radius:12px; 
    font-size:15px; 
    font-weight:500; 
    box-shadow:0 4px 18px rgba(0,0,0,.25); 
    opacity:0; 
    pointer-events:none; 
    transition:opacity .4s ease; 
    z-index:999}

  .popup.show{
    opacity:1}
